@model IEnumerable<OperadoresAplicacion.Models.OperadoresApp>

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Index</h2>
<button type="button" class="btn btn-info" onclick="MostrarForm()">Agregar</button>
<table class="table table-dark" id="tablaOperadores">
    <thead>
        <tr>
            <th scope="col">Id</th>
            <th scope="col">Nombre</th>
            <th scope="col">Edad</th>
            <th scope="col">Salario</th>
            <th scope="col">Fecha de Nacimiento</th>
            <th scope="col">Direccion</th>
            <th scope="col">Razon social</th>
            <th></th>
        </tr>
    </thead>

</table>

@section scripts{

    <script>
    $(document).ready(function () {
        $('#tablaOperadores').DataTable({
        "ajax": {
            "url": "@Url.Action("ObtenerOperadores", "Ajax")",
            "type": "GET",
            "datatype": "json"
        },
        "columns": [
            { "data": "Id" },
            { "data": "Nombre" },
            { "data": "Edad" },
            { "data": "Salario" },
            { "data": "Fecha_Nacimiento" },
            { "data": "Empresa.Direccion" },
            { "data": "Empresa.Razon_Social" },
            {
              "data": "Id", "render": function (data) {
                    return "<button class='btn btn-primary btn-sm' type='button' onclick='Abrirmodal("+ data+ ")'>Editar</button>"+
                           "<button class='btn btn-danger btn-sm' type='button' onclick='Eliminar("+ data +")'>Eliminar</button>"
                },
                "orderable": false,
                "searchable": false
            }
        ],
    });


    });

        function Modal($Id) {

            Swal.fire({
                title: "Agregar Operador",
                text: "You won't be able to revert this!",
                html: `
            <form>
                <label>Nombre</label>
                  <input type="text" class="form-control" id="Nombre" aria-describedby="emailHelp">
                <label>Edad</label>
                  <input type="number" class="form-control" id="Edad">
               <label>Salario</label>
                 <input type="Salario" class="form-control" id="Salario">
               <label>Fecha de nacimiento</label>
                 <input type="Date" class="form-control" id="Fecha_Nacimiento"
                <label>Razon social</label>
               <select class="form-control" name="IdEmpresa" id="IdEmpresa" >
                 <option value="Uno">1</option>
                 <option value="Dos">2</option>
            </select>
            </form>
            `,
                showCancelButton: true,
                confirmButtonColor: "#3085d6",
                cancelButtonColor: "#d33",
                confirmButtonText: "Aceptar"
            }).then((result) => {
                if (result.isConfirmed) {
                    Swal.fire({
                        title: "Deleted!",
                        text: "Your file has been deleted.",
                        icon: "success"
                    });
                }
            });
        }

        function Abrirmodal($id) {
            Modal($id);
    }

    function Emininar($Id) {
        alert("Eliminar"+$Id)
    }

    function MostrarForm() {

        Modal();
        
   
    }


        

    </script>
}

